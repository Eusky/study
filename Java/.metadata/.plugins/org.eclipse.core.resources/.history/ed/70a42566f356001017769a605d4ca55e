package chap09_instance_array;

import java.util.Arrays;

import javax.swing.JOptionPane;

public class Customer {
  
  // 필드
  private int money;
  private Cart cart;
  
  // 생성자
  public Customer(int money) {
    this.money = money;
  }

  public int getMoney() {
    return money;
  }

  public void setMoney(int money) {
    this.money = money;
  }

  public Cart getCart() {
    return cart;
  }

  public void setCart(Cart cart) {
    this.cart = cart;
  }
  
  // 메소드
  
  public void addToCart(Product product) {
    if(cart == null) {
      JOptionPane.showMessageDialog(null, "카트를 먼저 준비하세요.");
      return;
    }
    cart.addProduct(product);
  }
  
  public String purchase() {
    if(cart == null) {
      JOptionPane.showMessageDialog(null, "카트가 없어서 구매할 수 없습니다.");
      return null;
    }
    int count = cart.getCount();
    if(count == 0) {
      JOptionPane.showMessageDialog(null, "카트에 담긴 상품이 없어서 구매할 수 없습니다.");
      return null;
    }
    String receipt = "================= 구디마트 영수증 =================\n";
    int total = 0;
    for(int i=0; i<count; i++) {
      receipt += cart.getProducts()[i].getName() + ", ";
      receipt += cart.getProducts()[i].getPrice() + "\n";
      total += cart.getProducts()[i].getPrice();
    }
    return receipt + "총 금액: " + total;
  }

}
